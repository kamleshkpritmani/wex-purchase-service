# Development-specific configuration using H2 in PostgreSQL mode
server:
  port: 8080

spring:
  datasource:
    # Persists data to a local file for development convenience
    url: jdbc:h2:file:./data/wex-purchase-db;MODE=PostgreSQL;DB_CLOSE_DELAY=-1
    driver-class-name: org.h2.Driver
    username: sa
    password:
    
  jpa:
    hibernate:
      # Ensures Java Entities match the Flyway-managed schema strictly
      ddl-auto: validate
      
  flyway:
    enabled: true
    clean-disabled: false # Required for clean-on-validation-error to work
    # Automatically wipes and recreates the H2 DB if V1__ migration changes
    clean-on-validation-error: true 
    
  h2:
    console:
      enabled: true
      path: /h2-console

security:
  # Endpoints accessible without authentication for developer tooling
  public-urls:
     - /api/v1/auth/**
     - /v3/api-docs/**
     - /swagger-ui/**
     - /swagger-ui.html
     - /actuator/health/**
     - /actuator/info/**
  dev-only-public-urls:
     - /h2-console/**